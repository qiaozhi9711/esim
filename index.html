<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlobalConnect eSIM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        body { font-family: 'Inter', sans-serif; background-color: #FAFAFA; color: #1F2937; }
        html { scroll-behavior: smooth; }
        
        .chart-container { position: relative; width: 100%; max-width: 600px; margin: 0 auto; height: 300px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        
        .modal-scroll::-webkit-scrollbar { width: 8px; }
        .modal-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .modal-scroll::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .glass-effect { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(0,0,0,0.05); }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <nav class="fixed w-full z-50 glass-effect transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center gap-2 cursor-pointer" onclick="window.scrollTo(0,0)">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">E</div>
                    <span class="font-bold text-xl tracking-tight text-gray-900">Global<span class="text-blue-600">Connect</span></span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="#destinations" class="text-gray-600 hover:text-blue-600 font-medium transition" data-i18n="nav_dest">çƒ­é—¨ç›®çš„åœ°</a>
                    <a href="#how-it-works" class="text-gray-600 hover:text-blue-600 font-medium transition" data-i18n="nav_help">ä½¿ç”¨æ•™ç¨‹</a>
                    <a href="#data-analysis" class="text-gray-600 hover:text-blue-600 font-medium transition" data-i18n="nav_cost">èµ„è´¹å¯¹æ¯”</a>
                </div>
                <div class="flex items-center space-x-3">
                    <button class="text-gray-500 hover:text-gray-900 font-medium text-sm border px-3 py-1 rounded-full">â‚¬ EUR</button>
                    <button onclick="toggleLanguage()" class="bg-gray-100 hover:bg-gray-200 text-blue-700 font-bold text-sm px-3 py-1 rounded-full transition flex items-center gap-1">
                        <span id="lang-icon">ğŸŒ</span> <span id="lang-text">EN</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <header class="pt-32 pb-20 bg-gradient-to-br from-slate-50 to-blue-50 relative overflow-hidden">
        <div class="absolute top-20 right-0 w-96 h-96 bg-blue-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
        <div class="absolute top-40 -left-20 w-72 h-72 bg-green-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"></div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center">
            <div class="inline-block px-4 py-1.5 mb-6 text-sm font-semibold tracking-wider text-blue-800 uppercase bg-blue-100 rounded-full" data-i18n="hero_badge">
                ğŸš€ å…¨çƒ eSIM æµé‡è¶…å¸‚
            </div>
            <h1 class="text-5xl md:text-6xl font-extrabold text-gray-900 mb-6 tracking-tight">
                <span data-i18n="hero_title_1">è¿æ¥ä¸–ç•Œï¼Œ</span><span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-teal-500" data-i18n="hero_title_2">æ— ç¼æ¼«æ¸¸</span>
            </h1>
            <p class="text-xl text-gray-600 mb-10 max-w-2xl mx-auto" data-i18n="hero_desc">
                å‘Šåˆ«é«˜æ˜‚æ¼«æ¸¸è´¹ã€‚â‚¬1 èµ·è´­ï¼Œå³ä¹°å³ç”¨ï¼Œè¦†ç›–å…¨çƒ 190+ å›½å®¶å’Œåœ°åŒºã€‚
            </p>

            <div class="max-w-2xl mx-auto bg-white p-2 rounded-2xl shadow-xl flex items-center border border-gray-100 transform transition hover:scale-[1.01]">
                <div class="pl-4 text-gray-400 text-xl">ğŸ”</div>
                <input type="text" id="destination-search" placeholder="è¾“å…¥å›½å®¶ (ä¾‹å¦‚: æ³°å›½, è‹±å›½...)" 
                       class="w-full p-4 text-lg text-gray-700 outline-none rounded-xl" onkeyup="filterDestinations()">
                <button class="bg-blue-600 text-white px-8 py-3 rounded-xl font-semibold hover:bg-blue-700 transition shadow-lg" data-i18n="btn_search">
                    æœç´¢
                </button>
            </div>
        </div>
    </header>

    <section id="destinations" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-4">
                <div>
                    <h2 class="text-3xl font-bold text-gray-900" data-i18n="sec_dest_title">ğŸ”¥ çƒ­é—¨ç›®çš„åœ°</h2>
                    <p class="text-gray-600 mt-2" data-i18n="sec_dest_sub">è¦†ç›–å…¨çƒ 190+ å›½å®¶ï¼Œç‚¹å‡»é€‰æ‹©å¥—é¤</p>
                </div>
                <div class="flex flex-wrap gap-2 bg-gray-50 p-1 rounded-lg shadow-sm border border-gray-200">
                    <button class="filter-btn px-3 py-1.5 text-sm font-medium rounded-md bg-white shadow-sm text-blue-700" onclick="filterCategory('all')" data-i18n="filter_all">å…¨éƒ¨</button>
                    <button class="filter-btn px-3 py-1.5 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-100" onclick="filterCategory('asia')" data-i18n="filter_asia">äºšæ´²</button>
                    <button class="filter-btn px-3 py-1.5 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-100" onclick="filterCategory('europe')" data-i18n="filter_europe">æ¬§æ´²</button>
                    <button class="filter-btn px-3 py-1.5 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-100" onclick="filterCategory('americas')" data-i18n="filter_americas">ç¾æ´²</button>
                    <button class="filter-btn px-3 py-1.5 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-100" onclick="filterCategory('other')" data-i18n="filter_other">å…¶ä»–</button>
                </div>
            </div>

            <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                </div>
            <div id="no-results" class="hidden text-center py-20">
                <h3 class="text-xl font-bold text-gray-900" data-i18n="no_results">æœªæ‰¾åˆ°ç›¸å…³ç›®çš„åœ°</h3>
            </div>
        </div>
    </section>

    <section id="how-it-works" class="py-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-gray-900" data-i18n="sec_step_title">ğŸ“± 3æ­¥è½»æ¾æ¿€æ´»</h2>
                <p class="text-gray-600 mt-4" data-i18n="sec_step_sub">æ— éœ€æ’å¡ï¼Œæ‰«æäºŒç»´ç å³å¯è¿æ¥å…¨çƒç½‘ç»œ</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                <div class="bg-white p-8 rounded-2xl shadow-sm border border-gray-100">
                    <div class="w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-6">1</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2" data-i18n="step_1_title">åœ¨çº¿ä¸‹å•</h3>
                    <p class="text-gray-600 text-sm" data-i18n="step_1_desc">é€‰æ‹©ç›®çš„åœ°å’Œæµé‡åŒ…ï¼Œå®Œæˆæ”¯ä»˜ã€‚ç³»ç»Ÿå°†åœ¨ 1 åˆ†é’Ÿå†…è‡ªåŠ¨å‘é€ eSIM äºŒç»´ç ã€‚</p>
                </div>
                <div class="bg-white p-8 rounded-2xl shadow-sm border border-gray-100">
                    <div class="w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-6">2</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2" data-i18n="step_2_title">æ‰«ç å®‰è£…</h3>
                    <p class="text-gray-600 text-sm" data-i18n="step_2_desc">æ‰“å¼€æ‰‹æœºè®¾ç½® -> èœ‚çªç½‘ç»œ -> æ·»åŠ  eSIMã€‚æ‰«æé‚®ä»¶ä¸­çš„äºŒç»´ç å³å¯ã€‚</p>
                </div>
                <div class="bg-white p-8 rounded-2xl shadow-sm border border-gray-100">
                    <div class="w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-6">3</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2" data-i18n="step_3_title">è½åœ°å³è¿</h3>
                    <p class="text-gray-600 text-sm" data-i18n="step_3_desc">åˆ°è¾¾ç›®çš„åœ°åï¼Œå¼€å¯â€œæ•°æ®æ¼«æ¸¸â€ï¼Œæ‰‹æœºå°†è‡ªåŠ¨è¿æ¥å½“åœ°æœ€ä½³ç½‘ç»œã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <section id="data-analysis" class="py-20 bg-white border-t border-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900" data-i18n="sec_why_title">ä¸ºä»€ä¹ˆé€‰æ‹© GlobalConnect?</h2>
                <p class="text-gray-600 mt-2" data-i18n="sec_why_sub">ä¸ä»…ä¾¿å®œï¼Œæ›´ç¨³å®šã€‚</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div class="bg-gray-50 rounded-2xl p-6 shadow-sm border border-gray-100">
                    <h3 class="text-xl font-bold text-gray-800 mb-2" data-i18n="chart_cost_title">ğŸ’° èµ„è´¹å¯¹æ¯” (7å¤©/3GB)</h3>
                    <div class="chart-container"><canvas id="costComparisonChart"></canvas></div>
                </div>
                <div class="bg-gray-50 rounded-2xl p-6 shadow-sm border border-gray-100">
                    <h3 class="text-xl font-bold text-gray-800 mb-2" data-i18n="chart_speed_title">âš¡ 4G/5G è¦†ç›–æŒ‡æ•°</h3>
                    <div class="chart-container"><canvas id="speedChart"></canvas></div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-gray-900 text-white pt-16 pb-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-12">
                <div>
                    <h4 class="text-lg font-bold mb-6 text-white" data-i18n="footer_support">æ”¯æŒ</h4>
                    <ul class="space-y-3">
                        <li><a href="mailto:qiaozhi9711@gmail.com" class="text-gray-400 hover:text-white transition">qiaozhi9711@gmail.com</a></li>
                        <li><button onclick="openInfoModal('help')" class="text-gray-400 hover:text-white transition text-left" data-i18n="footer_faq">å¸¸è§é—®é¢˜ FAQ</button></li>
                        <li><button onclick="openInfoModal('setup')" class="text-gray-400 hover:text-white transition text-left" data-i18n="footer_setup">å¦‚ä½•è®¾ç½® eSIM</button></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-6 text-white" data-i18n="footer_shop">åº—é“º</h4>
                    <ul class="space-y-3">
                        <li><button onclick="openInfoModal('about')" class="text-gray-400 hover:text-white transition text-left" data-i18n="footer_about">å…³äºæˆ‘ä»¬</button></li>
                        <li><button onclick="openInfoModal('delivery')" class="text-gray-400 hover:text-white transition text-left" data-i18n="footer_delivery">å‘è´§æ”¿ç­– (Delivery)</button></li>
                        <li><button onclick="openInfoModal('refund')" class="text-gray-400 hover:text-white transition text-left" data-i18n="footer_refund">é€€æ¬¾æ”¿ç­– (Refund)</button></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-6 text-white" data-i18n="footer_info">ä¿¡æ¯</h4>
                    <ul class="space-y-3">
                        <li><button onclick="openInfoModal('contact')" class="text-gray-400 hover:text-white transition text-left" data-i18n="footer_contact">è”ç³»æˆ‘ä»¬</button></li>
                        <li><button onclick="openInfoModal('affiliate')" class="text-gray-400 hover:text-white transition text-left" data-i18n="footer_affiliate">è”ç›Ÿè®¡åˆ’</button></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-6 text-white" data-i18n="footer_legal">æ³•å¾‹æ¡æ¬¾</h4>
                    <ul class="space-y-3">
                        <li><button onclick="openInfoModal('privacy')" class="text-gray-400 hover:text-white transition text-left" data-i18n="footer_privacy">éšç§æ”¿ç­– (Privacy)</button></li>
                        <li><button onclick="openInfoModal('terms')" class="text-gray-400 hover:text-white transition text-left" data-i18n="footer_terms">æœåŠ¡æ¡æ¬¾ (Terms)</button></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-6">
                 <div class="flex space-x-6">
                    <a href="javascript:void(0)" onclick="alert('Coming soon...')" class="text-gray-400 hover:text-white text-2xl transition"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></a>
                    <a href="javascript:void(0)" onclick="alert('Coming soon...')" class="text-gray-400 hover:text-white text-2xl transition"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
                 </div>
                 <div class="mt-2 text-center text-xs text-gray-500">&copy; 2024 GlobalConnect Inc. All rights reserved.</div>
            </div>
        </div>
    </footer>

    <div id="product-modal" class="fixed inset-0 z-50 hidden" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl fade-in">
                    
                    <div class="bg-gray-50 px-4 py-4 sm:px-6 border-b border-gray-100 flex justify-between items-center">
                        <div class="flex items-center gap-4">
                            <img id="modal-flag" src="" class="w-12 h-12 rounded-full shadow-sm object-cover bg-white">
                            <div>
                                <h3 class="text-2xl font-bold leading-6 text-gray-900" id="modal-title">--</h3>
                                <p class="text-sm text-gray-500 mt-1"><span data-i18n="modal_network">ç½‘ç»œ</span>: <span id="modal-networks" class="font-medium text-blue-600">--</span></p>
                            </div>
                        </div>
                        <button type="button" class="text-gray-400 hover:text-gray-500 focus:outline-none" onclick="closeModal()">
                            <span class="text-2xl">âœ–ï¸</span>
                        </button>
                    </div>

                    <div class="px-4 py-6 sm:p-6 grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2">
                            <h4 class="text-lg font-bold text-gray-900 mb-4" data-i18n="modal_select_plan">é€‰æ‹©æµé‡åŒ…</h4>
                            <div id="plans-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-[400px] overflow-y-auto modal-scroll pr-2">
                            </div>
                        </div>

                        <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 h-fit flex flex-col justify-between">
                            <div>
                                <h4 class="text-lg font-bold text-gray-900 mb-4" data-i18n="modal_summary">è®¢å•æ‘˜è¦</h4>
                                <div class="space-y-4 mb-6">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-500" data-i18n="modal_selected">æ‰€é€‰å¥—é¤</span>
                                        <span class="font-medium text-gray-900" id="summary-plan" data-i18n="modal_unselected">æœªé€‰æ‹©</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-500" data-i18n="modal_validity">æœ‰æ•ˆæœŸ</span>
                                        <span class="font-medium text-gray-900" id="summary-validity">--</span>
                                    </div>
                                    <div class="border-t border-gray-200 pt-4 flex justify-between items-center">
                                        <span class="text-base font-bold text-gray-900" data-i18n="modal_total">åº”ä»˜é‡‘é¢</span>
                                        <span class="text-3xl font-bold text-blue-600" id="summary-price">â‚¬0.00</span>
                                    </div>
                                </div>
                            </div>

                            <button id="buy-btn" onclick="buyDirectly()" disabled 
                                    class="w-full bg-blue-600 text-white py-4 px-4 rounded-xl font-bold text-lg shadow-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2">
                                <span data-i18n="btn_select_plan">è¯·é€‰æ‹©å¥—é¤</span>
                            </button>
                            
                            <p class="text-xs text-center text-gray-400 mt-3">ğŸ”’ Stripe Secured Payment</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="info-modal" class="fixed inset-0 z-[60] hidden" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity backdrop-blur-sm" onclick="closeInfoModal()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl fade-in">
                    <div class="bg-gray-50 px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                        <h3 class="text-xl font-bold text-gray-900" id="info-title">Title</h3>
                        <button type="button" class="text-gray-400 hover:text-gray-500" onclick="closeInfoModal()">
                            <span class="text-2xl">âœ–ï¸</span>
                        </button>
                    </div>
                    <div class="px-6 py-6 max-h-[70vh] overflow-y-auto modal-scroll">
                        <div id="info-content" class="prose prose-blue text-gray-600 text-sm leading-relaxed whitespace-pre-line">
                            </div>
                    </div>
                    <div class="bg-gray-50 px-6 py-4 border-t border-gray-100 text-right">
                        <button class="bg-gray-900 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-gray-700 transition" onclick="closeInfoModal()" data-i18n="btn_close">å…³é—­</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // ============================================
        // å›½é™…åŒ– (i18n) æ•°æ®
        // ============================================
        let currentLang = 'zh';

        const translations = {
            zh: {
                nav_dest: "çƒ­é—¨ç›®çš„åœ°",
                nav_help: "ä½¿ç”¨æ•™ç¨‹",
                nav_cost: "èµ„è´¹å¯¹æ¯”",
                hero_badge: "ğŸš€ å…¨çƒ eSIM æµé‡è¶…å¸‚",
                hero_title_1: "è¿æ¥ä¸–ç•Œï¼Œ",
                hero_title_2: "æ— ç¼æ¼«æ¸¸",
                hero_desc: "å‘Šåˆ«é«˜æ˜‚æ¼«æ¸¸è´¹ã€‚â‚¬1 èµ·è´­ï¼Œå³ä¹°å³ç”¨ï¼Œè¦†ç›–å…¨çƒ 190+ å›½å®¶å’Œåœ°åŒºã€‚",
                search_placeholder: "è¾“å…¥å›½å®¶ (ä¾‹å¦‚: æ³°å›½, è‹±å›½...)",
                btn_search: "æœç´¢",
                sec_dest_title: "ğŸ”¥ çƒ­é—¨ç›®çš„åœ°",
                sec_dest_sub: "è¦†ç›–å…¨çƒ 190+ å›½å®¶ï¼Œç‚¹å‡»é€‰æ‹©å¥—é¤",
                filter_all: "å…¨éƒ¨",
                filter_asia: "äºšæ´²",
                filter_europe: "æ¬§æ´²",
                filter_americas: "ç¾æ´²",
                filter_other: "å…¶ä»–",
                no_results: "æœªæ‰¾åˆ°ç›¸å…³ç›®çš„åœ°",
                btn_view_plans: "æŸ¥çœ‹è¯¦ç»†å¥—é¤",
                sold_text: "äººå·²é€‰è´­",
                sec_step_title: "ğŸ“± 3æ­¥è½»æ¾æ¿€æ´»",
                sec_step_sub: "æ— éœ€æ’å¡ï¼Œæ‰«æäºŒç»´ç å³å¯è¿æ¥å…¨çƒç½‘ç»œ",
                step_1_title: "åœ¨çº¿ä¸‹å•",
                step_1_desc: "é€‰æ‹©ç›®çš„åœ°å’Œæµé‡åŒ…ï¼Œå®Œæˆæ”¯ä»˜ã€‚ç³»ç»Ÿå°†åœ¨ 1 åˆ†é’Ÿå†…è‡ªåŠ¨å‘é€ eSIM äºŒç»´ç ã€‚",
                step_2_title: "æ‰«ç å®‰è£…",
                step_2_desc: "æ‰“å¼€æ‰‹æœºè®¾ç½® -> èœ‚çªç½‘ç»œ -> æ·»åŠ  eSIMã€‚æ‰«æé‚®ä»¶ä¸­çš„äºŒç»´ç å³å¯ã€‚",
                step_3_title: "è½åœ°å³è¿",
                step_3_desc: "åˆ°è¾¾ç›®çš„åœ°åï¼Œå¼€å¯â€œæ•°æ®æ¼«æ¸¸â€ï¼Œæ‰‹æœºå°†è‡ªåŠ¨è¿æ¥å½“åœ°æœ€ä½³ç½‘ç»œã€‚",
                sec_why_title: "ä¸ºä»€ä¹ˆé€‰æ‹© GlobalConnect?",
                sec_why_sub: "ä¸ä»…ä¾¿å®œï¼Œæ›´ç¨³å®šã€‚",
                chart_cost_title: "ğŸ’° èµ„è´¹å¯¹æ¯” (7å¤©/3GB)",
                chart_speed_title: "âš¡ 4G/5G è¦†ç›–æŒ‡æ•°",
                footer_support: "æ”¯æŒ",
                footer_shop: "åº—é“º",
                footer_info: "ä¿¡æ¯",
                footer_legal: "æ³•å¾‹æ¡æ¬¾",
                footer_faq: "å¸¸è§é—®é¢˜ FAQ",
                footer_setup: "å¦‚ä½•è®¾ç½® eSIM",
                footer_about: "å…³äºæˆ‘ä»¬",
                footer_delivery: "å‘è´§æ”¿ç­– (Delivery)",
                footer_refund: "é€€æ¬¾æ”¿ç­– (Refund)",
                footer_contact: "è”ç³»æˆ‘ä»¬",
                footer_affiliate: "è”ç›Ÿè®¡åˆ’",
                footer_privacy: "éšç§æ”¿ç­– (Privacy)",
                footer_terms: "æœåŠ¡æ¡æ¬¾ (Terms)",
                modal_network: "ç½‘ç»œ",
                modal_select_plan: "é€‰æ‹©æµé‡åŒ…",
                modal_summary: "è®¢å•æ‘˜è¦",
                modal_selected: "æ‰€é€‰å¥—é¤",
                modal_unselected: "æœªé€‰æ‹©",
                modal_validity: "æœ‰æ•ˆæœŸ",
                modal_total: "åº”ä»˜é‡‘é¢",
                btn_select_plan: "è¯·é€‰æ‹©å¥—é¤",
                btn_pay_prefix: "ç«‹å³æ”¯ä»˜",
                btn_close: "å…³é—­",
                day: "å¤©",
                days: "å¤©"
            },
            en: {
                nav_dest: "Destinations",
                nav_help: "How it Works",
                nav_cost: "Pricing",
                hero_badge: "ğŸš€ Global eSIM Marketplace",
                hero_title_1: "Connect World, ",
                hero_title_2: "Seamlessly",
                hero_desc: "Say goodbye to roaming fees. Starts from â‚¬1. Global coverage in 190+ countries.",
                search_placeholder: "Enter country (e.g., Thailand, UK...)",
                btn_search: "Search",
                sec_dest_title: "ğŸ”¥ Top Destinations",
                sec_dest_sub: "Coverage in 190+ countries. Click to choose plan.",
                filter_all: "All",
                filter_asia: "Asia",
                filter_europe: "Europe",
                filter_americas: "Americas",
                filter_other: "Other",
                no_results: "No destinations found",
                btn_view_plans: "View Plans",
                sold_text: "Sold",
                sec_step_title: "ğŸ“± Easy Activation",
                sec_step_sub: "No SIM card needed. Just scan QR code.",
                step_1_title: "Order Online",
                step_1_desc: "Select destination and plan. Receive QR code via email instantly.",
                step_2_title: "Scan QR",
                step_2_desc: "Settings -> Cellular -> Add eSIM. Scan the code from email.",
                step_3_title: "Connect",
                step_3_desc: "Turn on 'Data Roaming' upon arrival. Connect automatically.",
                sec_why_title: "Why GlobalConnect?",
                sec_why_sub: "Cheaper, faster, stable.",
                chart_cost_title: "ğŸ’° Cost Comparison (7 Days/3GB)",
                chart_speed_title: "âš¡ 4G/5G Coverage Index",
                footer_support: "Support",
                footer_shop: "Shop",
                footer_info: "Info",
                footer_legal: "Legal",
                footer_faq: "FAQ",
                footer_setup: "Setup Guide",
                footer_about: "About Us",
                footer_delivery: "Delivery Policy",
                footer_refund: "Refund Policy",
                footer_contact: "Contact Us",
                footer_affiliate: "Affiliate Program",
                footer_privacy: "Privacy Policy",
                footer_terms: "Terms of Service",
                modal_network: "Network",
                modal_select_plan: "Select Plan",
                modal_summary: "Order Summary",
                modal_selected: "Plan",
                modal_unselected: "Not Selected",
                modal_validity: "Validity",
                modal_total: "Total",
                btn_select_plan: "Select a Plan",
                btn_pay_prefix: "Pay Now",
                btn_close: "Close",
                day: "Day",
                days: "Days"
            }
        };

        // ============================================
        // æ•°æ®é…ç½® (å¥—é¤ä¸äº§å“)
        // ============================================
        const LINK_1  = "https://buy.stripe.com/00wbJ30KjaqF1ODav71440l";
        const LINK_3  = "https://buy.stripe.com/28E8wRakT6apcth0Ux1440m";
        const LINK_5  = "https://buy.stripe.com/00w9AV0Kj7etbpd6eR1440n";
        const LINK_15 = "https://buy.stripe.com/4gM8wR2SrfKZ1OD1YB1440o";
        const LINK_25 = "https://buy.stripe.com/8x214pboX9mBdxleLn1440p";
        const LINK_50 = "https://buy.stripe.com/cNidRbeB97et0KzfPr1440q";

        // æ›´æ–°åçš„å¥—é¤ç»“æ„ (1, 3, 5, 15, 25, 50 æ¬§å…ƒ)
        const commonPlans = [
            { id: '1',  name: {zh: 'ä½“éªŒåŒ…', en: 'Trial'},     days: 1,  price: 1.00,  data: '300MB', stripeLink: LINK_1 },
            { id: '3',  name: {zh: 'çŸ­é€”åŒ…', en: 'Lite'},      days: 3,  price: 3.00,  data: '1GB',   stripeLink: LINK_3 },
            { id: '5',  name: {zh: 'åŸºç¡€åŒ…', en: 'Basic'},     days: 5,  price: 5.00,  data: '2GB',   stripeLink: LINK_5 }, 
            { id: '15', name: {zh: 'å‡æ—¥åŒ…', en: 'Holiday'},   days: 15, price: 15.00, data: '10GB',  stripeLink: LINK_15 },
            { id: '25', name: {zh: 'æœˆåº¦åŒ…', en: 'Monthly'},   days: 30, price: 25.00, data: '20GB',  stripeLink: LINK_25 },
            { id: '50', name: {zh: 'å•†åŠ¡åŒ…', en: 'Ultra'},     days: 30, price: 50.00, data: '30GB',  stripeLink: LINK_50 } 
        ];

        // äº§å“æ•°æ®å¢åŠ åŒè¯­åç§°
        const productsRaw = [
            { id: 'jp', name: {zh: 'æ—¥æœ¬', en: 'Japan'}, region: 'asia', flag: 'https://flagcdn.com/jp.svg', networks: 'Softbank / Docomo', rating: 4.9, sold: '50k+' },
            { id: 'kr', name: {zh: 'éŸ©å›½', en: 'Korea'}, region: 'asia', flag: 'https://flagcdn.com/kr.svg', networks: 'SK Telecom', rating: 4.8, sold: '32k+' },
            { id: 'th', name: {zh: 'æ³°å›½', en: 'Thailand'}, region: 'asia', flag: 'https://flagcdn.com/th.svg', networks: 'AIS / TrueMove', rating: 4.9, sold: '40k+' },
            { id: 'vn', name: {zh: 'è¶Šå—', en: 'Vietnam'}, region: 'asia', flag: 'https://flagcdn.com/vn.svg', networks: 'Viettel', rating: 4.7, sold: '15k+' },
            { id: 'id', name: {zh: 'å°å°¼', en: 'Indonesia'}, region: 'asia', flag: 'https://flagcdn.com/id.svg', networks: 'Telkomsel', rating: 4.6, sold: '20k+' },
            { id: 'eu', name: {zh: 'æ¬§æ´²', en: 'Europe'}, region: 'europe', flag: 'https://flagcdn.com/eu.svg', networks: 'Vodafone / Orange', rating: 4.9, sold: '80k+' },
            { id: 'uk', name: {zh: 'è‹±å›½', en: 'UK'}, region: 'europe', flag: 'https://flagcdn.com/gb.svg', networks: 'EE / O2', rating: 4.8, sold: '25k+' },
            { id: 'fr', name: {zh: 'æ³•å›½', en: 'France'}, region: 'europe', flag: 'https://flagcdn.com/fr.svg', networks: 'Orange', rating: 4.8, sold: '22k+' },
            { id: 'es', name: {zh: 'è¥¿ç­ç‰™', en: 'Spain'}, region: 'europe', flag: 'https://flagcdn.com/es.svg', networks: 'Movistar', rating: 4.7, sold: '18k+' },
            { id: 'tr', name: {zh: 'åœŸè€³å…¶', en: 'Turkey'}, region: 'europe', flag: 'https://flagcdn.com/tr.svg', networks: 'Turkcell', rating: 4.7, sold: '12k+' },
            { id: 'us', name: {zh: 'ç¾å›½', en: 'USA'}, region: 'americas', flag: 'https://flagcdn.com/us.svg', networks: 'AT&T / T-Mobile', rating: 4.7, sold: '45k+' },
            { id: 'au', name: {zh: 'æ¾³å¤§åˆ©äºš', en: 'Australia'}, region: 'other', flag: 'https://flagcdn.com/au.svg', networks: 'Telstra', rating: 4.8, sold: '10k+' },
            { id: 'ae', name: {zh: 'é˜¿è”é…‹', en: 'UAE'}, region: 'asia', flag: 'https://flagcdn.com/ae.svg', networks: 'Etisalat', rating: 4.9, sold: '8k+' },
            { id: 'za', name: {zh: 'å—é', en: 'South Africa'}, region: 'other', flag: 'https://flagcdn.com/za.svg', networks: 'Vodacom', rating: 4.5, sold: '5k+' },
        ];

        let products = productsRaw.map(p => ({ ...p, plans: commonPlans }));

        // åº•éƒ¨å†…å®¹åº“ (i18n å¤„ç†)
        const infoContent = {
            zh: {
                'about': "GlobalConnect Inc. è‡´åŠ›äºä¸ºå…¨çƒæ—…è¡Œè€…æä¾›æœ€ä¾¿æ·ã€æœ€å®æƒ çš„ eSIM æ•°æ®æœåŠ¡ã€‚\n\næˆ‘ä»¬æˆç«‹äº 2024 å¹´ï¼Œæ€»éƒ¨ä½äºæ–°åŠ å¡ï¼Œæ—¨åœ¨é€šè¿‡æŠ€æœ¯æ¶ˆé™¤å›½é™…æ¼«æ¸¸è´¹ã€‚ç›®å‰ï¼Œæˆ‘ä»¬çš„æœåŠ¡è¦†ç›–å…¨çƒ 190 å¤šä¸ªå›½å®¶å’Œåœ°åŒºï¼Œå·²ä¸ºè¶…è¿‡ 10 ä¸‡åç”¨æˆ·æä¾›æœåŠ¡ã€‚\n\næˆ‘ä»¬çš„ä½¿å‘½æ˜¯è®©è¿æ¥å˜å¾—ç®€å•ï¼Œæ— è®ºæ‚¨èº«åœ¨ä½•å¤„ã€‚",
                'privacy': "æˆ‘ä»¬éå¸¸é‡è§†æ‚¨çš„éšç§ã€‚\n\n1. æ•°æ®æ”¶é›†ï¼šæˆ‘ä»¬ä»…æ”¶é›†å¤„ç†è®¢å•æ‰€éœ€çš„å¿…è¦ä¿¡æ¯ï¼ˆå¦‚ç”µå­é‚®ä»¶åœ°å€ï¼‰ã€‚\n2. æ”¯ä»˜å®‰å…¨ï¼šæ‰€æœ‰æ”¯ä»˜å‡ç”± Stripe å®‰å…¨å¤„ç†ï¼Œæˆ‘ä»¬ä¸ä¼šæ¥è§¦æˆ–å­˜å‚¨æ‚¨çš„ä¿¡ç”¨å¡ä¿¡æ¯ã€‚\n3. æ•°æ®ä½¿ç”¨ï¼šæ‚¨çš„æ•°æ®ä»…ç”¨äº eSIM å‘è´§å’Œå®¢æˆ·æœåŠ¡ï¼Œç»ä¸ä¼šå‡ºå”®ç»™ç¬¬ä¸‰æ–¹ã€‚\n\nå¦‚æœæ‚¨è¦æ±‚åˆ é™¤æ‚¨çš„æ•°æ®ï¼Œè¯·è”ç³» qiaozhi9711@gmail.comã€‚",
                'terms': "ä½¿ç”¨æœ¬ç½‘ç«™å³è¡¨ç¤ºæ‚¨åŒæ„ä»¥ä¸‹æ¡æ¬¾ï¼š\n\n1. æœåŠ¡æ€§è´¨ï¼šæˆ‘ä»¬è¦é”€å”®çš„æ˜¯æ•°å­— eSIM äº§å“ï¼Œéå®ä½“å¡ã€‚\n2. è®¾å¤‡å…¼å®¹æ€§ï¼šè´­ä¹°å‰ï¼Œç”¨æˆ·æœ‰è´£ä»»ç¡®è®¤å…¶æ‰‹æœºæ”¯æŒ eSIM åŠŸèƒ½ã€‚\n3. ä¸¥ç¦è½¬å”®ï¼šæœªç»æˆæƒï¼Œç¦æ­¢è½¬å”®æˆ‘ä»¬çš„äºŒç»´ç ã€‚\n4. å…è´£å£°æ˜ï¼šç½‘ç»œä¿¡å·å—å½“åœ°è¿è¥å•†åŸºç«™è¦†ç›–å½±å“ï¼Œæˆ‘ä»¬åœ¨ç‰¹å®šæ­»è§’æ— æ³•ä¿è¯ 100% ä¿¡å·ã€‚",
                'refund': "æˆ‘ä»¬çš„é€€æ¬¾ä¿éšœæ”¿ç­–ï¼š\n\n1. 100% å…¨é¢é€€æ¬¾ï¼šå¦‚æœ eSIM å› æŠ€æœ¯åŸå› æ— æ³•åœ¨æ‚¨çš„è®¾å¤‡ä¸Šæ¿€æ´»ï¼Œæˆ‘ä»¬å°†å…¨é¢é€€æ¬¾ã€‚\n2. ç”³è¯·æ—¶æ•ˆï¼šè¯·åœ¨è´­ä¹°å 30 å¤©å†…è”ç³»æˆ‘ä»¬ã€‚\n3. ä¸å¯é€€æ¬¾æƒ…å†µï¼šå¦‚æœæ‚¨è´­ä¹°åå‘ç°æ‰‹æœºä¸æ”¯æŒ eSIMï¼Œæˆ–è€…å·²ç»æ¿€æ´»å¹¶ä½¿ç”¨äº†æ•°æ®æµé‡ï¼Œé€šå¸¸ä¸äºˆé€€æ¬¾ã€‚\n\né€€æ¬¾å¤„ç†æ—¶é—´é€šå¸¸ä¸º 3-5 ä¸ªå·¥ä½œæ—¥ã€‚",
                'delivery': "å‘è´§æ”¿ç­– (Digital Delivery)ï¼š\n\n1. å‘è´§æ–¹å¼ï¼šç”µå­é‚®ä»¶å‘é€äºŒç»´ç  (QR Code)ã€‚\n2. å‘è´§æ—¶é—´ï¼šæ”¯ä»˜æˆåŠŸåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å‘é€é‚®ä»¶ï¼Œé€šå¸¸åœ¨ 1-2 åˆ†é’Ÿå†…åˆ°è¾¾ã€‚\n3. æœªæ”¶åˆ°é‚®ä»¶ï¼šè¯·æ£€æŸ¥åƒåœ¾é‚®ä»¶ç®± (Spam)ã€‚å¦‚æœ 10 åˆ†é’Ÿåä»æœªæ”¶åˆ°ï¼Œè¯·è”ç³»å®¢æœã€‚",
                'contact': "è”ç³»æˆ‘ä»¬ï¼š\n\nå®¢æˆ·æ”¯æŒé‚®ç®±: qiaozhi9711@gmail.com\nå·¥ä½œæ—¶é—´: 24/7 å…¨å¤©å€™æ”¯æŒ\n\nå¦‚æœæ‚¨é‡åˆ°è¿æ¥é—®é¢˜ï¼Œè¯·åœ¨é‚®ä»¶ä¸­é™„ä¸Šè®¢å•å·å’Œæ‰‹æœºå‹å·ï¼Œä»¥ä¾¿æˆ‘ä»¬å¿«é€Ÿä¸ºæ‚¨è§£å†³ã€‚",
                'help': "å¸¸è§é—®é¢˜ (FAQ)ï¼š\n\nQ: æˆ‘éœ€è¦æ’å¡å—ï¼Ÿ\nA: ä¸éœ€è¦ï¼ŒeSIM æ˜¯è™šæ‹Ÿå¡ï¼Œæ‰«ç å³å¯ç”¨ã€‚\n\nQ: å¯ä»¥ä¿ç•™åŸæ¥çš„å·ç å—ï¼Ÿ\nA: å¯ä»¥ï¼Œæ‚¨å¯ä»¥åŒæ—¶ä½¿ç”¨åŸå·æ¥æ‰“ç”µè¯ï¼Œç”¨ eSIM ä¸Šç½‘ã€‚\n\nQ: åˆ°è¾¾ç›®çš„åœ°å‰å¯ä»¥æ¿€æ´»å—ï¼Ÿ\nA: å»ºè®®åœ¨å‡ºå‘å½“å¤©æˆ–åˆ°è¾¾åæ¿€æ´»ã€‚",
                'setup': "è®¾ç½®æ•™ç¨‹ï¼š\n\n1. iOS: è®¾ç½® > èœ‚çªç½‘ç»œ > æ·»åŠ  eSIM > æ‰«æäºŒç»´ç ã€‚\n2. Android: è®¾ç½® > ç½‘ç»œå’Œäº’è”ç½‘ > SIM å¡ > æ·»åŠ  > æ‰«æäºŒç»´ç ã€‚\n\næ³¨æ„ï¼šæ¿€æ´»æ—¶éœ€è¦è¿æ¥ WiFi ç½‘ç»œã€‚",
                'affiliate': "åŠ å…¥æˆ‘ä»¬çš„è”ç›Ÿè®¡åˆ’ï¼š\n\nå¦‚æœæ‚¨æ˜¯æ—…æ¸¸åšä¸»æˆ–ç½‘ç«™ç®¡ç†å‘˜ï¼Œæ¬¢è¿æ¨å¹¿æˆ‘ä»¬çš„ eSIMã€‚\nè¯·å‘é€é‚®ä»¶è‡³ qiaozhi9711@gmail.com è·å–è¯¦ç»†ä½£é‡‘æ–¹æ¡ˆã€‚"
            },
            en: {
                'about': "GlobalConnect Inc. is dedicated to providing the most convenient and affordable eSIM data services for global travelers.\n\nFounded in 2024 and headquartered in Singapore, we aim to eliminate roaming charges through technology. Currently, our services cover over 190 countries and regions worldwide, serving over 100,000 users.\n\nOur mission is to make connection simple, wherever you are.",
                'privacy': "We value your privacy.\n\n1. Data Collection: We only collect necessary information for order processing (e.g., email).\n2. Payment Security: All payments are securely processed by Stripe; we do not access or store your credit card information.\n3. Data Usage: Your data is only used for eSIM delivery and customer service and will never be sold to third parties.",
                'terms': "By using this site, you agree to the following:\n\n1. Service Nature: We sell digital eSIM products, not physical cards.\n2. Device Compatibility: It is the user's responsibility to ensure their phone supports eSIM before purchase.\n3. Resale Prohibited: Unauthorized resale of our QR codes is prohibited.",
                'refund': "Refund Policy:\n\n1. 100% Refund: If the eSIM cannot be activated due to technical reasons, we will refund fully.\n2. Timeline: Please contact us within 30 days of purchase.\n3. Non-refundable: Purchases made for incompatible phones or if data has already been used are generally non-refundable.",
                'delivery': "Delivery Policy:\n\n1. Method: Email delivery of QR Code.\n2. Time: Automatic email delivery within 1-2 minutes after payment.\n3. Not Received: Check your Spam folder. If not received after 10 minutes, please contact support.",
                'contact': "Contact Us:\n\nSupport Email: qiaozhi9711@gmail.com\nHours: 24/7 Support\n\nPlease include your order number and phone model for faster resolution.",
                'help': "FAQ:\n\nQ: Do I need to insert a card?\nA: No, eSIM is virtual. Just scan to use.\n\nQ: Can I keep my original number?\nA: Yes, you can use your original number for calls/texts while using eSIM for data.\n\nQ: Can I activate before arrival?\nA: We recommend activating on the day of departure or upon arrival.",
                'setup': "Setup Guide:\n\n1. iOS: Settings > Cellular > Add eSIM > Scan QR.\n2. Android: Settings > Network & Internet > SIMs > Add > Scan QR.\n\nNote: WiFi connection is required during activation.",
                'affiliate': "Affiliate Program:\n\nIf you are a travel blogger or webmaster, welcome to promote our eSIM.\nEmail qiaozhi9711@gmail.com for commission details."
            }
        };

        // ----------------------------------------------------
        // æ ¸å¿ƒé€»è¾‘
        // ----------------------------------------------------
        let selectedPlan = null;

        document.addEventListener('DOMContentLoaded', () => {
            updatePageLanguage();
            renderProducts();
            initCharts();
        });

        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            updatePageLanguage();
            renderProducts(lastFilter, lastSearch); 
            if(!document.getElementById('product-modal').classList.contains('hidden')){
                closeModal();
            }
        }

        function updatePageLanguage() {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[currentLang][key]) {
                    el.textContent = translations[currentLang][key];
                }
            });
            document.getElementById('destination-search').placeholder = translations[currentLang]['search_placeholder'];
            document.getElementById('lang-text').textContent = currentLang === 'zh' ? 'EN' : 'ä¸­æ–‡';
            document.getElementById('lang-icon').textContent = currentLang === 'zh' ? 'ğŸŒ' : 'ğŸ‡¨ğŸ‡³';
        }

        let lastFilter = 'all';
        let lastSearch = '';

        function renderProducts(filter = 'all', searchTerm = '') {
            lastFilter = filter;
            lastSearch = searchTerm;
            
            const grid = document.getElementById('product-grid');
            const noResults = document.getElementById('no-results');
            grid.innerHTML = '';
            
            const t = translations[currentLang];
            
            const filtered = products.filter(p => {
                const matchesCategory = filter === 'all' || p.region === filter || (filter === 'other' && p.region === 'other');
                const nameMatch = p.name.zh.toLowerCase().includes(searchTerm.toLowerCase()) || 
                                  p.name.en.toLowerCase().includes(searchTerm.toLowerCase());
                return matchesCategory && nameMatch;
            });

            if (filtered.length === 0) {
                noResults.classList.remove('hidden');
            } else {
                noResults.classList.add('hidden');
                filtered.forEach(p => {
                    const displayName = currentLang === 'zh' ? `${p.name.zh} ${p.name.en}` : p.name.en;
                    const card = document.createElement('div');
                    card.className = 'bg-white rounded-2xl p-5 cursor-pointer transition duration-300 border border-gray-100 hover:shadow-xl hover:border-blue-100 flex flex-col justify-between group h-full';
                    card.onclick = () => openModal(p.id);
                    card.innerHTML = `
                        <div>
                            <div class="flex justify-between items-start mb-4">
                                <div class="w-16 h-16 rounded-full bg-gray-50 border border-gray-100 shadow-sm overflow-hidden group-hover:scale-110 transition duration-300">
                                    <img src="${p.flag}" alt="${displayName}" class="w-full h-full object-cover">
                                </div>
                            </div>
                            <h3 class="font-bold text-xl text-gray-900 mb-1 group-hover:text-blue-600 transition">${displayName}</h3>
                            <div class="flex items-center gap-3 text-sm text-gray-400 mb-6">
                                <div class="flex items-center text-yellow-400"><span>â˜…</span><span class="text-gray-600 font-medium ml-1">${p.rating}</span></div>
                                <span class="w-1 h-1 bg-gray-300 rounded-full"></span><span>${p.sold} ${t.sold_text}</span>
                            </div>
                        </div>
                        <div class="mt-2"><button class="w-full bg-gray-50 text-blue-600 font-bold py-3 px-4 rounded-xl transition duration-300 group-hover:bg-blue-600 group-hover:text-white flex justify-center items-center"><span class="text-sm">${t.btn_view_plans}</span></button></div>
                    `;
                    grid.appendChild(card);
                });
            }
        }

        function filterCategory(c) { renderProducts(c, lastSearch); }
        function filterDestinations() { renderProducts(lastFilter, document.getElementById('destination-search').value); }

        function openModal(pid) {
            const product = products.find(p => p.id === pid);
            if (!product) return;
            selectedPlan = null;
            updateSummary();
            
            const t = translations[currentLang];
            const displayName = currentLang === 'zh' ? `${product.name.zh} ${product.name.en}` : product.name.en;

            document.getElementById('modal-flag').src = product.flag;
            document.getElementById('modal-title').textContent = displayName;
            document.getElementById('modal-networks').textContent = product.networks;
            
            const container = document.getElementById('plans-container');
            container.innerHTML = '';
            
            product.plans.forEach(plan => {
                const planName = plan.name[currentLang];
                const dayLabel = plan.days > 1 ? t.days : t.day;
                const validityStr = `${plan.days} ${dayLabel}`;

                const div = document.createElement('div');
                div.className = 'border border-gray-200 rounded-xl p-4 cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition flex justify-between items-center group';
                div.onclick = () => selectPlan({...plan, displayName: planName, displayValidity: validityStr}, div);
                
                div.innerHTML = `
                    <div>
                        <div class="font-bold text-gray-900 text-lg group-hover:text-blue-700">${plan.data}</div>
                        <div class="text-xs text-gray-500 mt-1">${planName} Â· ${validityStr}</div>
                    </div>
                    <div class="text-blue-600 font-bold text-xl">â‚¬${plan.price.toFixed(0)}</div>
                `;
                container.appendChild(div);
            });
            document.getElementById('product-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        function closeModal() { document.getElementById('product-modal').classList.add('hidden'); document.body.style.overflow = 'auto'; }

        function selectPlan(plan, el) {
            selectedPlan = plan;
            Array.from(document.getElementById('plans-container').children).forEach(child => { child.className = 'border border-gray-200 rounded-xl p-4 cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition flex justify-between items-center group'; });
            el.className = 'border-2 border-blue-600 bg-blue-50 rounded-xl p-4 cursor-pointer flex justify-between items-center shadow-md';
            updateSummary();
        }

        function updateSummary() {
            const btn = document.getElementById('buy-btn');
            const t = translations[currentLang];

            if (selectedPlan) {
                document.getElementById('summary-plan').textContent = `${selectedPlan.data} (${selectedPlan.displayName})`;
                document.getElementById('summary-validity').textContent = selectedPlan.displayValidity;
                document.getElementById('summary-price').textContent = `â‚¬${selectedPlan.price.toFixed(2)}`;
                btn.disabled = false;
                btn.innerHTML = `${t.btn_pay_prefix} â‚¬${selectedPlan.price.toFixed(2)}`;
            } else {
                document.getElementById('summary-plan').textContent = t.modal_unselected;
                document.getElementById('summary-validity').textContent = '--';
                document.getElementById('summary-price').textContent = 'â‚¬0.00';
                btn.disabled = true;
                btn.innerHTML = t.btn_select_plan;
            }
        }

        function buyDirectly() {
            if (!selectedPlan || !selectedPlan.stripeLink) { 
                alert(currentLang === 'zh' ? "é…ç½®é”™è¯¯ï¼šè¯¥å¥—é¤æœªç»‘å®šæ”¯ä»˜é“¾æ¥" : "Configuration Error: No payment link."); 
                return; 
            }
            if (selectedPlan.stripeLink === "#") {
                 alert(currentLang === 'zh' ? "æ¼”ç¤ºæ¨¡å¼ï¼šæš‚æ— æ”¯ä»˜é“¾æ¥ã€‚" : "Demo Mode: No payment link yet.");
                 return;
            }
            const btn = document.getElementById('buy-btn');
            btn.disabled = true;
            btn.innerHTML = `<svg class="animate-spin -ml-1 mr-2 h-5 w-5 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ${currentLang === 'zh' ? 'æ­£åœ¨è·³è½¬...' : 'Redirecting...'}`;
            setTimeout(() => { window.location.href = selectedPlan.stripeLink; }, 800);
        }

        function openInfoModal(key) {
            const content = infoContent[currentLang][key];
            const titles = {
                zh: {
                    'about': 'å…³äºæˆ‘ä»¬', 'privacy': 'éšç§æ”¿ç­–', 'terms': 'æœåŠ¡æ¡æ¬¾', 'refund': 'é€€æ¬¾æ”¿ç­–',
                    'delivery': 'å‘è´§æ”¿ç­–', 'contact': 'è”ç³»æˆ‘ä»¬', 'help': 'å¸¸è§é—®é¢˜', 'setup': 'è®¾ç½®æ•™ç¨‹', 'affiliate': 'è”ç›Ÿè®¡åˆ’'
                },
                en: {
                    'about': 'About Us', 'privacy': 'Privacy Policy', 'terms': 'Terms of Service', 'refund': 'Refund Policy',
                    'delivery': 'Delivery Policy', 'contact': 'Contact Us', 'help': 'FAQ', 'setup': 'Setup Guide', 'affiliate': 'Affiliate Program'
                }
            };
            if(content) {
                document.getElementById('info-title').textContent = titles[currentLang][key] || 'Info';
                document.getElementById('info-content').textContent = content;
                document.getElementById('info-modal').classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }
        }
        function closeInfoModal() { document.getElementById('info-modal').classList.add('hidden'); document.body.style.overflow = 'auto'; }

        function initCharts() {
            const ctxCost = document.getElementById('costComparisonChart').getContext('2d');
            new Chart(ctxCost, { type: 'bar', data: { labels: ['Roaming', 'Wi-Fi Rental', 'GlobalConnect'], datasets: [{ data: [12, 8.5, 1], backgroundColor: ['#e5e7eb', '#e5e7eb', '#2563eb'], borderRadius: 4 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: {display:false} } } });
            const ctxSpeed = document.getElementById('speedChart').getContext('2d');
            new Chart(ctxSpeed, { type: 'line', data: { labels: ['Asia', 'USA', 'EU', 'SEA'], datasets: [{ data: [85, 72, 68, 55], borderColor: '#10b981', backgroundColor: 'rgba(16, 185, 129, 0.1)', fill: true, tension: 0.4 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: {display:false} } } });
        }
    </script>
</body>
</html>
